
<!DOCTYPE html>
<html>
  <head>
    
<meta charset="utf-8" >

<title>Python 2.7.x ä¸ Python 3.x çš„ä¸»è¦å·®å¼‚ã€Œè½¬] | å°å°ç‹çš„åèŠ±å›­</title>
<meta name="description" content="å°å°ç‹çš„åèŠ±å›­">

<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.7.0/animate.min.css">

<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous">
<link rel="shortcut icon" href="http://wangqunsong.top/favicon.ico?v=1556375647041">
<link rel="stylesheet" href="http://wangqunsong.top/styles/main.css">



<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
<script src="https://cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>



  </head>
  <body>
    <div id="app" class="main">
      <div class="site-header-container">
  <div class="site-header">
    <div class="left">
      <a href="http://wangqunsong.top">
        <img class="avatar" src="http://wangqunsong.top/images/avatar.png?v=1556375647041" alt="" width="32px" height="32px">
      </a>
      <a href="http://wangqunsong.top">
        <h1 class="site-title">å°å°ç‹çš„åèŠ±å›­</h1>
      </a>
    </div>
    <div class="right">
      <transition name="fade">
        <i class="icon" :class="{ 'icon-close-outline': menuVisible, 'icon-menu-outline': !menuVisible }" @click="menuVisible = !menuVisible"></i>
      </transition>
    </div>
  </div>
</div>

<transition name="fade">
  <div class="menu-container" style="display: none;" v-show="menuVisible">
    <div class="menu-list">
      
        
          <a href="http://wangqunsong.top" class="menu purple-link">
            é¦–é¡µ
          </a>
        
      
        
          <a href="http://wangqunsong.top/archives" class="menu purple-link">
            å½’æ¡£
          </a>
        
      
        
          <a href="http://wangqunsong.top/tags" class="menu purple-link">
            æ ‡ç­¾
          </a>
        
      
        
          <a href="http://wangqunsong.top/post/guan-yu-wo/" class="menu purple-link">
            å…³äº
          </a>
        
      
    </div>
  </div>
</transition>


      <div class="content-container">
        <div class="post-detail">
          
          <h2 class="post-title">Python 2.7.x ä¸ Python 3.x çš„ä¸»è¦å·®å¼‚ã€Œè½¬]</h2>
          <div class="post-info post-detail-info">
            <span><i class="icon-calendar-outline"></i> 2017-02-16</span>
            
              <span>
                <i class="icon-pricetags-outline"></i>
                
                  <a href="http://wangqunsong.top/tag/1sgoPsPP5">
                    Python
                    
                  </a>
                
              </span>
            
          </div>
          <div class="post-content">
            <p>ğŸ‘  æ¬¢è¿ä½¿ç”¨ æ¥åˆ°å°å°ç‹çš„åèŠ±å›­ï¼<br>
âœï¸  è¿™é‡Œä»…ä»…æ˜¯ä¸€ä¸ªè®°å½•ä¸ªäººæˆé•¿çš„åœ°æ–¹ï¼Œç°åœ¨æ‰€å¤„çš„ä½ç½®æ˜¯<strong>Python 2.7.x ä¸ Python 3.x çš„ä¸»è¦å·®å¼‚ã€Œè½¬]</strong></p>
<!-- more -->
<blockquote>
<p><a href="http://chenqx.github.io/2014/11/10/Key-differences-between-Python-2-7-x-and-Python-3-x/">åŸæ–‡é“¾æ¥-ä¸­æ–‡</a></p>
<p><a href="https://nbviewer.jupyter.org/github/rasbt/python_reference/blob/master/tutorials/key_differences_between_python_2_and_3.ipynb?create=1">åŸæ–‡é“¾æ¥-è‹±æ–‡</a></p>
</blockquote>
<h2 id="__future__æ¨¡å—"><strong>__future__æ¨¡å—</strong></h2>
<p>Python 3.x ä»‹ç»çš„ ä¸€äº›Python 2 ä¸å…¼å®¹çš„å…³é”®å­—å’Œç‰¹æ€§å¯ä»¥é€šè¿‡åœ¨ Python 2 çš„å†…ç½® <code>__future__</code> æ¨¡å—å¯¼å…¥ã€‚å¦‚æœä½ è®¡åˆ’è®©ä½ çš„ä»£ç æ”¯æŒ Python 3.xï¼Œå»ºè®®ä½ ä½¿ç”¨ <code>__future__</code> æ¨¡å—å¯¼å…¥ã€‚ä¾‹å¦‚ï¼Œå¦‚æœæˆ‘æƒ³è¦ åœ¨Python 2 ä¸­è¡¨ç° Python 3.x ä¸­çš„æ•´é™¤ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡å¦‚ä¸‹å¯¼å…¥</p>
<pre><code>from __future__ import division
</code></pre>
<p>æ›´å¤šçš„ <code>__future__</code> æ¨¡å—å¯è¢«å¯¼å…¥çš„ç‰¹æ€§è¢«åˆ—åœ¨ä¸‹è¡¨ä¸­ï¼š</p>
<table>
<thead>
<tr>
<th><strong>feature</strong></th>
<th><strong>optional in</strong></th>
<th><strong>mandatory in</strong></th>
<th><strong>effect</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>nested_scopes</td>
<td>2.1.0b1</td>
<td>2.2</td>
<td><a href="http://legacy.python.org/dev/peps/pep-0227/">PEP 227</a>: Statically Nested Scopes</td>
</tr>
<tr>
<td>generators</td>
<td>2.2.0a1</td>
<td>2.3</td>
<td><a href="http://legacy.python.org/dev/peps/pep-0255/">PEP 255</a>: Simple Generators</td>
</tr>
<tr>
<td>division</td>
<td>2.2.0a2</td>
<td>3.0</td>
<td><a href="http://legacy.python.org/dev/peps/pep-0238/">PEP 238</a>: Changing the Division Operator</td>
</tr>
<tr>
<td>absolute_import</td>
<td>2.5.0a1</td>
<td>3.0</td>
<td><a href="http://legacy.python.org/dev/peps/pep-0328/">PEP 328</a>: Imports: Multi-Line and Absolute/Relative</td>
</tr>
<tr>
<td>with_statement</td>
<td>2.5.0a1</td>
<td>2.6</td>
<td><a href="http://www.python.org/dev/peps/pep-0343">PEP 343</a>: The â€œwithâ€ Statement</td>
</tr>
<tr>
<td>print_function</td>
<td>2.5.0a2</td>
<td>3.0</td>
<td><a href="http://legacy.python.org/dev/peps/pep-3105/">PEP 3105</a>: Make print a function</td>
</tr>
<tr>
<td>unicode_literals</td>
<td>2.5.0a2</td>
<td>3.0</td>
<td><a href="http://legacy.python.org/dev/peps/pep-3112/">PEP 3112</a>: Bytes literals in Python 3000</td>
</tr>
</tbody>
</table>
<p>(Source: <a href="https://docs.python.org/2/library/future.html">https://docs.python.org/2/library/future.html</a>)</p>
<pre><code>from platform import python_version
</code></pre>
<h2 id="printå‡½æ•°"><strong>printå‡½æ•°</strong></h2>
<p>å¾ˆçç¢ï¼Œè€Œ <code>print</code> è¯­æ³•çš„å˜åŒ–å¯èƒ½æ˜¯æœ€å¹¿ä¸ºäººçŸ¥çš„äº†ï¼Œä½†æ˜¯ä»å€¼å¾—ä¸€æçš„æ˜¯ï¼š Python 2 çš„ print å£°æ˜å·²ç»è¢« <code>print()</code> å‡½æ•°å–ä»£äº†ï¼Œè¿™æ„å‘³ç€æˆ‘ä»¬å¿…é¡»åŒ…è£…æˆ‘ä»¬æƒ³æ‰“å°åœ¨å°æ‹¬å·ä¸­çš„å¯¹è±¡ã€‚
Python 2 ä¸å…·æœ‰é¢å¤–çš„å°æ‹¬å·é—®é¢˜ã€‚ä½†å¯¹æ¯”ä¸€ä¸‹ï¼Œå¦‚æœæˆ‘ä»¬æŒ‰ç…§ Python 2 çš„æ–¹å¼ä¸ä½¿ç”¨å°æ‹¬å·è°ƒç”¨ <code>print</code> å‡½æ•°ï¼ŒPython 3 å°†æŠ›å‡ºä¸€ä¸ªè¯­æ³•å¼‚å¸¸ï¼ˆ<code>SyntaxError</code>ï¼‰ã€‚</p>
<p><strong>Python 2</strong></p>
<pre><code>print 'Python', python_version()
print 'Hello, World!'
print('Hello, World!')
print &quot;text&quot;, ; print 'print more text on the same line'
</code></pre>
<p><em>run result:</em>
Python 2.7.6
Hello, World!
Hello, World!
text print more text on the same line</p>
<p><strong>Python 3</strong></p>
<pre><code>print('Python', python_version())
print('Hello, World!')
print(&quot;some text,&quot;, end=&quot;&quot;) 
print(' print more text on the same line')
</code></pre>
<p><em>run result:</em>
Python 3.4.1
Hello, World!
some text, print more text on the same line</p>
<pre><code>print 'Hello, World!'
</code></pre>
<p><em>run result:</em>
File â€œâ€œ, line 1
ã€€ã€€print â€˜Hello, World!â€™
ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€^
SyntaxError: invalid syntax</p>
<p><strong>Note:</strong>
ã€€ã€€ä»¥ä¸Šé€šè¿‡ Python 2 ä½¿ç”¨ <code>Printing &quot;Hello, World&quot;</code> æ˜¯éå¸¸æ­£å¸¸çš„ï¼Œå°½ç®¡å¦‚æ­¤ï¼Œå¦‚æœä½ æœ‰å¤šä¸ªå¯¹è±¡åœ¨å°æ‹¬å·ä¸­ï¼Œæˆ‘ä»¬å°†åˆ›å»ºä¸€ä¸ªå…ƒç»„ï¼Œå› ä¸º <code>print</code> åœ¨ Python 2 ä¸­æ˜¯ä¸€ä¸ªå£°æ˜ï¼Œè€Œä¸æ˜¯ä¸€ä¸ªå‡½æ•°è°ƒç”¨ã€‚</p>
<pre><code>print 'Python', python_version()
print('a', 'b')
print 'a', 'b'
</code></pre>
<p><em>run result:</em>
Python 2.7.7
(â€˜aâ€™, â€˜bâ€™)
a b</p>
<h2 id="æ•´é™¤"><strong>æ•´é™¤</strong></h2>
<p>å¦‚æœä½ æ­£åœ¨ç§»æ¤ä»£ç ï¼Œè¿™ä¸ªå˜åŒ–æ˜¯ç‰¹åˆ«å±é™©çš„ã€‚æˆ–è€…ä½ åœ¨ Python 2 ä¸Šæ‰§è¡Œ Python 3 çš„ä»£ç ã€‚å› ä¸ºè¿™ä¸ªæ•´é™¤çš„å˜åŒ–è¡¨ç°åœ¨å®ƒä¼šè¢«å¿½è§†ï¼ˆå³å®ƒä¸ä¼šæŠ›å‡ºè¯­æ³•å¼‚å¸¸ï¼‰ã€‚
ã€€ã€€å› æ­¤ï¼Œæˆ‘è¿˜æ˜¯å€¾å‘äºä½¿ç”¨ä¸€ä¸ª <code>float(3)/2</code> æˆ– <code>3/2.0</code> ä»£æ›¿åœ¨æˆ‘çš„ Python 3 è„šæœ¬ä¿å­˜åœ¨ Python 2 ä¸­çš„ <code>3/2</code> çš„ä¸€äº›éº»çƒ¦ï¼ˆå¹¶ä¸”åè€Œè¿‡æ¥ä¹Ÿä¸€æ ·ï¼Œæˆ‘å»ºè®®åœ¨ä½ çš„ Python 2 è„šæœ¬ä¸­ä½¿ç”¨ <code>from __future__ import division</code>ï¼‰
<strong>Python 2</strong></p>
<pre><code>print 'Python', python_version()
print '3 / 2 =', 3 / 2
print '3 // 2 =', 3 // 2
print '3 / 2.0 =', 3 / 2.0
print '3 // 2.0 =', 3 // 2.0
</code></pre>
<p><em>run result:</em>
Python 2.7.6
3 / 2 = 1
3 // 2 = 1
3 / 2.0 = 1.5
3 // 2.0 = 1.0</p>
<p><strong>Python 3</strong></p>
<pre><code>print('Python', python_version())
print('3 / 2 =', 3 / 2)
print('3 // 2 =', 3 // 2)
print('3 / 2.0 =', 3 / 2.0)
print('3 // 2.0 =', 3 // 2.0)
</code></pre>
<p><em>run result:</em>
Python 3.4.1
3 / 2 = 1.5
3 // 2 = 1
3 / 2.0 = 1.5
3 // 2.0 = 1.0</p>
<h2 id="unicode"><strong>Unicode</strong></h2>
<p>Python 2 æœ‰ ASCII str() ç±»å‹ï¼Œ<code>unicode()</code> æ˜¯å•ç‹¬çš„ï¼Œä¸æ˜¯ <code>byte</code> ç±»å‹ã€‚
ã€€ã€€ç°åœ¨ï¼Œ åœ¨ Python 3ï¼Œæˆ‘ä»¬æœ€ç»ˆæœ‰äº† <code>Unicode (utf-8)</code> å­—ç¬¦ä¸²ï¼Œä»¥åŠä¸€ä¸ªå­—èŠ‚ç±»ï¼š<code>byte</code> å’Œ <code>bytearrays</code>ã€‚</p>
<p><strong>Python 2</strong></p>
<pre><code>print 'Python', python_version()
</code></pre>
<p><em>run result:</em>
Python 2.7.6</p>
<pre><code>print type(unicode('this is like a python3 str type'))
</code></pre>
<p><em>run result:</em>
&lt; type â€˜unicodeâ€™ &gt;</p>
<pre><code>print type(b'byte type does not exist')
</code></pre>
<p><em>run result:</em>
&lt; type â€˜strâ€™ &gt;</p>
<pre><code>print 'they are really' + b' the same'
</code></pre>
<p><em>run result:</em>
they are really the same</p>
<pre><code>print type(bytearray(b'bytearray oddly does exist though'))
</code></pre>
<p><em>run result:</em>
&lt; type â€˜bytearrayâ€™ &gt;</p>
<p><strong>Python 3</strong></p>
<pre><code>print('Python', python_version())
print('strings are now utf-8 \u03BCnico\u0394Ã©!')
</code></pre>
<p><em>run result:</em>
Python 3.4.1
strings are now utf-8 Î¼nicoÎ”Ã©!</p>
<pre><code>print('Python', python_version(), end=&quot;&quot;)
print(' has', type(b' bytes for storing data'))
</code></pre>
<p><em>run result:</em>
Python 3.4.1 has &lt; class â€˜bytesâ€™ &gt;</p>
<pre><code>print('and Python', python_version(), end=&quot;&quot;)
print(' also has', type(bytearray(b'bytearrays')))
</code></pre>
<p><em>run result:</em>
and Python 3.4.1 also has &lt; class â€˜bytearrayâ€™&gt;</p>
<pre><code>'note that we cannot add a string' + b'bytes for data'
</code></pre>
<p><em>run result:</em>
-â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”
TypeError Traceback (most recent call last)
&lt; ipython-input-13-d3e8942ccf81&gt; in &lt; module&gt;()
â€”â€”&gt; 1 â€˜note that we cannot add a stringâ€™ + bâ€™bytes for dataâ€™</p>
<p>TypeError: Canâ€™t convert â€˜bytesâ€™ object to str implicitly</p>
<h2 id="xrangeæ¨¡å—"><strong>xrangeæ¨¡å—</strong></h2>
<p>åœ¨ Python 2 ä¸­ <code>xrange()</code> åˆ›å»ºè¿­ä»£å¯¹è±¡çš„ç”¨æ³•æ˜¯éå¸¸æµè¡Œçš„ã€‚æ¯”å¦‚ï¼š <code>for</code> å¾ªç¯æˆ–è€…æ˜¯åˆ—è¡¨/é›†åˆ/å­—å…¸æ¨å¯¼å¼ã€‚
ã€€ã€€è¿™ä¸ªè¡¨ç°ååˆ†åƒç”Ÿæˆå™¨ï¼ˆæ¯”å¦‚ã€‚â€œæƒ°æ€§æ±‚å€¼â€ï¼‰ã€‚ä½†æ˜¯è¿™ä¸ª <code>xrange-iterable</code> æ˜¯æ— ç©·çš„ï¼Œæ„å‘³ç€ä½ å¯ä»¥æ— é™éå†ã€‚
ã€€ã€€ç”±äºå®ƒçš„æƒ°æ€§æ±‚å€¼ï¼Œå¦‚æœä½ ä¸å¾—ä»…ä»…ä¸éå†å®ƒä¸€æ¬¡ï¼Œ<code>xrange()</code> å‡½æ•° æ¯” <code>range()</code> æ›´å¿«ï¼ˆæ¯”å¦‚ <code>for</code> å¾ªç¯ï¼‰ã€‚å°½ç®¡å¦‚æ­¤ï¼Œå¯¹æ¯”è¿­ä»£ä¸€æ¬¡ï¼Œä¸å»ºè®®ä½ é‡å¤è¿­ä»£å¤šæ¬¡ï¼Œå› ä¸ºç”Ÿæˆå™¨æ¯æ¬¡éƒ½ä»å¤´å¼€å§‹ã€‚
ã€€ã€€åœ¨ Python 3 ä¸­ï¼Œ<code>range()</code> æ˜¯åƒ <code>xrange()</code> é‚£æ ·å®ç°ä»¥è‡³äºä¸€ä¸ªä¸“é—¨çš„ <code>xrange()</code> å‡½æ•°éƒ½ä¸å†å­˜åœ¨ï¼ˆåœ¨ Python 3 ä¸­ <code>xrange()</code> ä¼šæŠ›å‡ºå‘½åå¼‚å¸¸ï¼‰ã€‚</p>
<pre><code>import timeit
n = 10000
def test_range(n):
    return for i in range(n):
        pass
def test_xrange(n):
    for i in xrange(n):
        pass
</code></pre>
<p><strong>Python 2</strong></p>
<pre><code>print 'Python', python_version()
print '\ntiming range()'
%timeit test_range(n)
print '\n\ntiming xrange()'
%timeit test_xrange(n)
</code></pre>
<p><em>run result:</em>
Python 2.7.6</p>
<p>timing range()
1000 loops, best of 3: 433 Âµs per loop</p>
<p>timing xrange()
1000 loops, best of 3: 350 Âµs per loop</p>
<p><strong>Python 3</strong></p>
<pre><code>print('Python', python_version())
print('\ntiming range()')
%timeit test_range(n)
</code></pre>
<p><em>run result:</em>
Python 3.4.1</p>
<p>timing range()
1000 loops, best of 3: 520 Âµs per loop</p>
<pre><code>print(xrange(10))
</code></pre>
<p><em>run result:</em>
-â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”
NameError Traceback (most recent call last)</p>
<p>in ()
â€”â€”&gt; 1 print(xrange(10))</p>
<p>NameError: name â€˜xrangeâ€™ is not defined</p>
<h2 id="python3ä¸­çš„rangeå¯¹è±¡çš„__contains__æ–¹æ³•"><strong>Python3ä¸­çš„rangeå¯¹è±¡çš„__contains__æ–¹æ³•</strong></h2>
<p>å¦å¤–ä¸€ä»¶å€¼å¾—ä¸€æçš„äº‹æƒ…å°±æ˜¯åœ¨ Python 3 ä¸­ <code>range</code> æœ‰ä¸€ä¸ªæ–°çš„ <code>__contains__</code> æ–¹æ³•ï¼ˆæ„Ÿè°¢ Yuchen Ying æŒ‡å‡ºäº†è¿™ä¸ªï¼‰ï¼Œ<code>__contains__</code> æ–¹æ³•å¯ä»¥åŠ é€Ÿ â€œæŸ¥æ‰¾â€ åœ¨ Python 3.x ä¸­æ˜¾è‘—çš„æ•´æ•°å’Œå¸ƒå°”ç±»å‹ã€‚</p>
<pre><code>x = 10000000
def val_in_range(x, val):
    return val in range(x)
def val_in_xrange(x, val):
    return val in xrange(x)
print('Python', python_version())
assert(val_in_range(x, x/2) == True)
assert(val_in_range(x, x//2) == True)
%timeit val_in_range(x, x/2)
%timeit val_in_range(x, x//2)
</code></pre>
<p><em>run result:</em>
Python 3.4.1
1 loops, best of 3: 742 ms per loop
1000000 loops, best of 3: 1.19 Âµs per loop
ã€€ã€€åŸºäºä»¥ä¸Šçš„ timeit çš„ç»“æœï¼Œå½“å®ƒä½¿ä¸€ä¸ªæ•´æ•°ç±»å‹ï¼Œè€Œä¸æ˜¯æµ®ç‚¹ç±»å‹çš„æ—¶å€™ï¼Œä½ å¯ä»¥çœ‹åˆ°æ‰§è¡ŒæŸ¥æ‰¾çš„é€Ÿåº¦æ˜¯ 60000 å€å¿«ã€‚å°½ç®¡å¦‚æ­¤ï¼Œå› ä¸º Python 2.x çš„ <code>range</code> æˆ–è€…æ˜¯ <code>xrange</code> æ²¡æœ‰ä¸€ä¸ª <code>__contains__</code> æ–¹æ³•ï¼Œè¿™ä¸ªæ•´æ•°ç±»å‹æˆ–è€…æ˜¯æµ®ç‚¹ç±»å‹çš„æŸ¥è¯¢é€Ÿåº¦ä¸ä¼šç›¸å·®å¤ªå¤§ã€‚</p>
<pre><code>print 'Python', python_version()
assert(val_in_xrange(x, x/2.0) == True)
assert(val_in_xrange(x, x/2) == True)
assert(val_in_range(x, x/2) == True)
assert(val_in_range(x, x//2) == True)
%timeit val_in_xrange(x, x/2.0)
%timeit val_in_xrange(x, x/2)
%timeit val_in_range(x, x/2.0)
%timeit val_in_range(x, x/2)
</code></pre>
<p><em>run result:</em>
Python 2.7.7
1 loops, best of 3: 285 ms per loop
1 loops, best of 3: 179 ms per loop
1 loops, best of 3: 658 ms per loop
1 loops, best of 3: 556 ms per loop
ã€€ã€€ä¸‹é¢è¯´ä¸‹ <code>__contain__</code>æ–¹æ³•å¹¶æ²¡æœ‰åŠ å…¥åˆ° Python 2.x ä¸­çš„è¯æ®ï¼š</p>
<pre><code>print('Python', python_version())
range.__contains__
</code></pre>
<p><em>run result:</em>
Python 3.4.1</p>
<p>&lt; slot wrapper â€˜<strong>contains</strong>â€˜ of â€˜rangeâ€™ objects &gt;</p>
<pre><code>print 'Python', python_version()
range.__contains__
</code></pre>
<p><em>run result:</em>
Python 2.7.7</p>
<p>-â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”
AttributeError Traceback (most recent call last)
&lt; ipython-input-7-05327350dafb&gt; in &lt; module&gt;()
1 print â€˜Pythonâ€™, python*version()â€”â€”&gt; 2 range.<code>_contains*</code></p>
<p>AttributeError: â€˜builtin*functionor_methodâ€™ object has no attribute <code>â€™__contains*â€˜</code></p>
<pre><code>print 'Python', python_version()
xrange.__contains__
</code></pre>
<p><em>run result:</em>
Python 2.7.7</p>
<p>-â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”
AttributeError Traceback (most recent call last)
&lt; ipython-input-8-7d1a71bfee8e&gt; in &lt; module&gt;()
1 print â€˜Pythonâ€™, python*version()â€”â€”&gt; 2 xrange.<code>_contains*</code></p>
<p>AttributeError: type object â€˜xrangeâ€™ has no attribute <code>'__contains__'</code></p>
<p><strong>æ³¨æ„åœ¨ Python 2 å’Œ Python 3 ä¸­é€Ÿåº¦çš„ä¸åŒ</strong>
ã€€ã€€æœ‰äº›äººæŒ‡å‡ºäº† Python 3 çš„ <code>range()</code> å’Œ Python 2 çš„ <code>xrange()</code> ä¹‹é—´çš„é€Ÿåº¦ä¸åŒã€‚å› ä¸ºä»–ä»¬æ˜¯ç”¨ç›¸åŒçš„æ–¹æ³•å®ç°çš„ï¼Œå› æ­¤æœŸæœ›ç›¸åŒçš„é€Ÿåº¦ã€‚å°½ç®¡å¦‚æ­¤ï¼Œè¿™äº‹å®åœ¨äº Python 3 å€¾å‘äºæ¯” Python 2 è¿è¡Œçš„æ…¢ä¸€ç‚¹ã€‚</p>
<pre><code>def test_while():
    i = 0
    while i &lt; 20000:
        i += 1
    return
</code></pre>
<p><strong>Python 3</strong></p>
<pre><code>print('Python', python_version())
%timeit test_while()
</code></pre>
<p><em>run result:</em>
Python 3.4.1
100 loops, best of 3: 2.68 ms per loop</p>
<p><strong>Python 2</strong></p>
<pre><code>print 'Python', python_version()
%timeit test_while()
</code></pre>
<p><em>run result:</em>
Python 2.7.6
1000 loops, best of 3: 1.72 ms per loop</p>
<h2 id="raising-exceptions"><strong>Raising exceptions</strong></h2>
<p>Python 2 æ¥å—æ–°æ—§ä¸¤ç§è¯­æ³•æ ‡è®°ï¼Œåœ¨ Python 3 ä¸­å¦‚æœæˆ‘ä¸ç”¨å°æ‹¬å·æŠŠå¼‚å¸¸å‚æ•°æ‹¬èµ·æ¥å°±ä¼šé˜»å¡ï¼ˆå¹¶ä¸”åè¿‡æ¥å¼•å‘ä¸€ä¸ªè¯­æ³•å¼‚å¸¸ï¼‰ã€‚</p>
<p><strong>Python 2</strong></p>
<pre><code>print 'Python', python_version()
</code></pre>
<p><em>run result:</em>
Python 2.7.6</p>
<pre><code>raise IOError, &quot;file error&quot;
</code></pre>
<p><em>run result:</em></p>
<p>-â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”
IOError Traceback (most recent call last)
&lt; ipython-input-8-25f049caebb0&gt; in &lt; module&gt;()
â€”â€”&gt; 1 raise IOError, â€œfile errorâ€</p>
<p>IOError: file error</p>
<pre><code>raise IOError(&quot;file error&quot;)
</code></pre>
<p><em>run result:</em>
-â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”
IOError Traceback (most recent call last)
&lt; ipython-input-9-6f1c43f525b2&gt; in &lt; module&gt;()
â€”â€”&gt; 1 raise IOError(â€œfile errorâ€)</p>
<p>IOError: file error</p>
<p><strong>Python 3</strong></p>
<pre><code>print 'Python', python_version()
</code></pre>
<p><em>run result:</em>
Python 3.4.1</p>
<pre><code>raise IOError, &quot;file error&quot;
</code></pre>
<p><em>run result:</em></p>
<p>File â€œâ€œ, line 1
raise IOError, â€œfile errorâ€
ã€€ã€€ã€€ã€€ã€€ã€€^
SyntaxError: invalid syntax
ã€€ã€€åœ¨ Python 3 ä¸­ï¼Œå¯ä»¥è¿™æ ·æŠ›å‡ºå¼‚å¸¸ï¼š</p>
<pre><code>print('Python', python_version())
raise IOError(&quot;file error&quot;)
</code></pre>
<p><em>run result:</em>
Python 3.4.1</p>
<p>-â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”
OSError Traceback (most recent call last)
&lt; ipython-input-11-c350544d15da&gt; in &lt; module&gt;()
1 print(â€˜Pythonâ€™, python_version())
â€”â€”&gt; 2 raise IOError(â€œfile errorâ€)</p>
<p>OSError: file error</p>
<h2 id="handling-exceptions"><strong>Handling exceptions</strong></h2>
<p>åœ¨ Python 3 ä¸­å¤„ç†å¼‚å¸¸ä¹Ÿè½»å¾®çš„æ”¹å˜äº†ï¼Œåœ¨ Python 3 ä¸­æˆ‘ä»¬ç°åœ¨ä½¿ç”¨ <code>as</code> ä½œä¸ºå…³é”®è¯ã€‚</p>
<p><strong>Python 2</strong></p>
<pre><code>print 'Python', python_version()
try:
    let_us_cause_a_NameError
except NameError, err:
    print err, '--&gt; our error message'
</code></pre>
<p><em>run result:</em>
Python 2.7.6
name â€˜let_us_cause_a_NameErrorâ€™ is not defined â€”&gt; our error message</p>
<p><strong>Python 3</strong></p>
<pre><code>print('Python', python_version())
try:
    let_us_cause_a_NameError
except NameError as err:
    print(err, '--&gt; our error message')
</code></pre>
<p><em>run result:</em></p>
<p>Python 3.4.1
name â€˜let_us_cause_a_NameErrorâ€™ is not defined â€”&gt; our error message</p>
<h2 id="nextå‡½æ•°-and-nextæ–¹æ³•"><strong>next()å‡½æ•° and .next()æ–¹æ³•</strong></h2>
<p>å› ä¸º <code>next() (.next())</code> æ˜¯ä¸€ä¸ªå¦‚æ­¤æ™®é€šçš„ä½¿ç”¨å‡½æ•°ï¼ˆæ–¹æ³•ï¼‰ï¼Œè¿™é‡Œæœ‰å¦å¤–ä¸€ä¸ªè¯­æ³•æ”¹å˜ï¼ˆæˆ–è€…æ˜¯å®ç°ä¸Šæ”¹å˜äº†ï¼‰ï¼Œå€¼å¾—ä¸€æçš„æ˜¯ï¼šåœ¨ Python 2.7.5 ä¸­å‡½æ•°å’Œæ–¹æ³•ä½ éƒ½å¯ä»¥ä½¿ç”¨ï¼Œ<code>next()</code> å‡½æ•°åœ¨ Python 3 ä¸­ä¸€ç›´ä¿ç•™ç€ï¼ˆè°ƒç”¨ <code>.next()</code> æŠ›å‡ºå±æ€§å¼‚å¸¸ï¼‰ã€‚</p>
<p><strong>Python 2</strong></p>
<pre><code>print 'Python', python_version()
my_generator = (letter for letter in 'abcdefg')
next(my_generator)
my_generator.next()
</code></pre>
<p><em>run result:</em>
Python 2.7.6</p>
<p>â€˜b</p>
<p><strong>Python 3</strong></p>
<pre><code>print('Python', python_version())
my_generator = (letter for letter in 'abcdefg')
next(my_generator)
</code></pre>
<p><em>run result:</em>
Python 3.4.1</p>
<p>â€˜aâ€™</p>
<pre><code>my_generator.next()
</code></pre>
<p><em>run result:</em>
-â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”
AttributeError Traceback (most recent call last)
&lt; ipython-input-14-125f388bb61b&gt; in &lt; module&gt;()
â€”â€”&gt; 1 my_generator.next()</p>
<p>AttributeError: â€˜generatorâ€™ object has no attribute â€˜nextâ€™</p>
<h2 id="forå¾ªç¯å˜é‡å’Œå…¨å±€å‘½åç©ºé—´æ³„æ¼"><strong>Forå¾ªç¯å˜é‡å’Œå…¨å±€å‘½åç©ºé—´æ³„æ¼</strong></h2>
<p>å¥½æ¶ˆæ¯ï¼šåœ¨ Python 3.x ä¸­ <code>for</code> å¾ªç¯å˜é‡ä¸ä¼šå†å¯¼è‡´å‘½åç©ºé—´æ³„æ¼ã€‚
ã€€ã€€åœ¨ Python 3.x ä¸­åšäº†ä¸€ä¸ªæ”¹å˜ï¼Œåœ¨ Whatâ€™s New In Python 3.0 ä¸­æœ‰å¦‚ä¸‹æè¿°ï¼š
ã€€ã€€â€œåˆ—è¡¨æ¨å¯¼ä¸å†æ”¯æŒ <code>[... for var in item1, item2, ...]</code> è¿™æ ·çš„è¯­æ³•ã€‚ä½¿ç”¨ <code>[... for var in (item1, item2, ...)]</code> ä»£æ›¿ã€‚ä¹Ÿéœ€è¦æé†’çš„æ˜¯åˆ—è¡¨æ¨å¯¼æœ‰ä¸åŒçš„è¯­ä¹‰ï¼š ä»–ä»¬å…³é—­äº†åœ¨ <code>list()</code> æ„é€ å™¨ä¸­çš„ç”Ÿæˆå™¨è¡¨è¾¾å¼çš„è¯­æ³•ç³–, å¹¶ä¸”ç‰¹åˆ«æ˜¯å¾ªç¯æ§åˆ¶å˜é‡ä¸å†æ³„æ¼è¿›å‘¨å›´çš„ä½œç”¨èŒƒå›´åŸŸ.â€</p>
<p><strong>Python 2</strong></p>
<pre><code>print 'Python', python_version()
i = 1
print 'before: i =', i
print 'comprehension: ', [i for i in range(5)]
print 'after: i =', i
</code></pre>
<p><em>run result:</em>
Python 2.7.6
before: i = 1
comprehension: [0, 1, 2, 3, 4]
after: i = 4</p>
<p><strong>Python 3</strong></p>
<pre><code>print('Python', python_version())
i = 1
print('before: i =', i)
print('comprehension:', [i for i in range(5)])
print('after: i =', i)
</code></pre>
<p><em>run result:</em>
Python 3.4.1
before: i = 1
comprehension: [0, 1, 2, 3, 4]
after: i = 1</p>
<h2 id="æ¯”è¾ƒä¸å¯æ’åºç±»å‹"><strong>æ¯”è¾ƒä¸å¯æ’åºç±»å‹</strong></h2>
<p>åœ¨ Python 3 ä¸­çš„å¦å¤–ä¸€ä¸ªå˜åŒ–å°±æ˜¯å½“å¯¹ä¸å¯æ’åºç±»å‹åšæ¯”è¾ƒçš„æ—¶å€™ï¼Œä¼šæŠ›å‡ºä¸€ä¸ªç±»å‹é”™è¯¯ã€‚</p>
<p><strong>Python 2</strong></p>
<pre><code>print 'Python', python_version()
print &quot;[1, 2] &gt; 'foo' = &quot;, [1, 2] &gt; 'foo'
print &quot;(1, 2) &gt; 'foo' = &quot;, (1, 2) &gt; 'foo'
print &quot;[1, 2] &gt; (1, 2) = &quot;, [1, 2] &gt; (1, 2)
</code></pre>
<p><em>run result:</em>
Python 2.7.6
[1, 2] &gt; â€˜fooâ€™ = False
(1, 2) &gt; â€˜fooâ€™ = True
[1, 2] &gt; (1, 2) = False</p>
<p><strong>Python 3</strong></p>
<pre><code>print('Python', python_version())
print(&quot;[1, 2] &gt; 'foo' = &quot;, [1, 2] &gt; 'foo')
print(&quot;(1, 2) &gt; 'foo' = &quot;, (1, 2) &gt; 'foo')
print(&quot;[1, 2] &gt; (1, 2) = &quot;, [1, 2] &gt; (1, 2))
</code></pre>
<p><em>run result:</em>
Python 3.4.1</p>
<p>-â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”
TypeError Traceback (most recent call last)
&lt; ipython-input-16-a9031729f4a0&gt; in &lt; module&gt;()
1 print(â€˜Pythonâ€™, python_version())
â€”â€”&gt; 2 print(â€œ[1, 2] &gt; â€˜fooâ€™ = â€œ, [1, 2] &gt; â€˜fooâ€™)
3 print(â€œ(1, 2) &gt; â€˜fooâ€™ = â€œ, (1, 2) &gt; â€˜fooâ€™)
4 print(â€œ[1, 2] &gt; (1, 2) = â€œ, [1, 2] &gt; (1, 2))</p>
<p>TypeError: unorderable types: list() &gt; str()</p>
<h2 id="é€šè¿‡inputè§£æç”¨æˆ·çš„è¾“å…¥"><strong>é€šè¿‡input()è§£æç”¨æˆ·çš„è¾“å…¥</strong></h2>
<p>å¹¸è¿çš„æ˜¯ï¼Œåœ¨ Python 3 ä¸­å·²ç»è§£å†³äº†æŠŠç”¨æˆ·çš„è¾“å…¥å­˜å‚¨ä¸ºä¸€ä¸ª <code>str</code> å¯¹è±¡çš„é—®é¢˜ã€‚ä¸ºäº†é¿å…åœ¨ Python 2 ä¸­çš„è¯»å–éå­—ç¬¦ä¸²ç±»å‹çš„å±é™©è¡Œä¸ºï¼Œæˆ‘ä»¬ä¸å¾—ä¸ä½¿ç”¨ <code>raw_input()</code> ä»£æ›¿ã€‚</p>
<p><strong>Python 2</strong>
Python 2.7.6
[GCC 4.0.1 (Apple Inc. build 5493)] on darwin
Type â€œhelpâ€, â€œcopyrightâ€, â€œcreditsâ€ or â€œlicenseâ€ for more information.</p>
<pre><code>&gt;&gt;&gt; my_input = input('enter a number: ')

enter a number: 123

&gt;&gt;&gt; type(my_input)
&lt;type 'int'&gt;

&gt;&gt;&gt; my_input = raw_input('enter a number: ')

enter a number: 123

&gt;&gt;&gt; type(my_input)
&lt;type 'str'&gt;

</code></pre>
<p><strong>Python 3</strong>
Python 3.4.1
[GCC 4.2.1 (Apple Inc. build 5577)] on darwin
Type â€œhelpâ€, â€œcopyrightâ€, â€œcreditsâ€ or â€œlicenseâ€ for more information.</p>
<pre><code>&gt;&gt;&gt; my_input = input('enter a number: ')

enter a number: 123

&gt;&gt;&gt; type(my_input)
&lt;class 'str'&gt;

</code></pre>
<h2 id="è¿”å›å¯è¿­ä»£å¯¹è±¡è€Œä¸æ˜¯åˆ—è¡¨"><strong>è¿”å›å¯è¿­ä»£å¯¹è±¡ï¼Œè€Œä¸æ˜¯åˆ—è¡¨</strong></h2>
<p>å¦‚æœåœ¨ xrange ç« èŠ‚çœ‹åˆ°çš„ï¼Œç°åœ¨åœ¨ Python 3 ä¸­ä¸€äº›æ–¹æ³•å’Œå‡½æ•°è¿”å›è¿­ä»£å¯¹è±¡ â€” ä»£æ›¿ Python 2 ä¸­çš„åˆ—è¡¨
ã€€ã€€å› ä¸ºæˆ‘ä»¬é€šå¸¸é‚£äº›éå†åªæœ‰ä¸€æ¬¡ï¼Œæˆ‘è®¤ä¸ºè¿™ä¸ªæ”¹å˜å¯¹èŠ‚çº¦å†…å­˜å¾ˆæœ‰æ„ä¹‰ã€‚å°½ç®¡å¦‚æ­¤ï¼Œå®ƒä¹Ÿæ˜¯å¯èƒ½çš„ï¼Œç›¸å¯¹äºç”Ÿæˆå™¨ â€”- å¦‚éœ€è¦éå†å¤šæ¬¡ã€‚å®ƒæ˜¯ä¸é‚£ä¹ˆé«˜æ•ˆçš„ã€‚
ã€€ã€€è€Œå¯¹äºé‚£äº›æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬çœŸæ­£éœ€è¦çš„æ˜¯åˆ—è¡¨å¯¹è±¡ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ <code>list()</code> å‡½æ•°ç®€å•çš„æŠŠè¿­ä»£å¯¹è±¡è½¬æ¢æˆä¸€ä¸ªåˆ—è¡¨ã€‚</p>
<p><strong>Python 2</strong></p>
<pre><code>print 'Python', python_version() 
print range(3) 
print type(range(3))
</code></pre>
<p><em>run result:</em>
Python 2.7.6
[0, 1, 2]
&lt; type â€˜listâ€™&gt;</p>
<p><strong>Python 3</strong></p>
<pre><code>print('Python', python_version())
print(range(3))
print(type(range(3)))
print(list(range(3)))
</code></pre>
<p><em>run result:</em>
Python 3.4.1
range(0, 3)
&lt; class â€˜rangeâ€™&gt;
[0, 1, 2]
ã€€ã€€åœ¨ Python 3 ä¸­ä¸€äº›ç»å¸¸ä½¿ç”¨åˆ°çš„ä¸å†è¿”å›åˆ—è¡¨çš„å‡½æ•°å’Œæ–¹æ³•ï¼š</p>
<ul>
<li><code>zip()</code></li>
<li><code>map()</code></li>
<li><code>filter()</code></li>
<li>dictionaryâ€™s <code>.keys()</code> method</li>
<li>dictionaryâ€™s <code>.values()</code> method</li>
<li>dictionaryâ€™s <code>.items()</code> method</li>
</ul>
<h2 id="æ›´å¤šçš„å…³äº-python-2-å’Œ-python-3-çš„æ–‡ç« "><strong>æ›´å¤šçš„å…³äº Python 2 å’Œ Python 3 çš„æ–‡ç« </strong></h2>
<p>ä¸‹é¢æ˜¯æˆ‘å»ºè®®åç»­çš„å…³äº Python 2 å’Œ Python 3 çš„ä¸€äº›å¥½æ–‡ç« ã€‚</p>
<p><strong>ç§»æ¤åˆ° Python 3</strong></p>
<ul>
<li><a href="https://wiki.python.org/moin/Python2orPython3">Should I use Python 2 or Python 3 for my development activity?</a></li>
<li><a href="https://docs.python.org/3.0/whatsnew/3.0.html">Whatâ€™s New In Python 3.0</a></li>
<li><a href="http://python3porting.com/differences.html">Porting to Python 3</a></li>
<li><a href="https://docs.python.org/3/howto/pyporting.html">Porting Python 2 Code to Python 3</a></li>
<li><a href="http://nothingbutsnark.svbtle.com/my-view-on-the-current-state-of-python-3">How keep Python 3 moving forward</a></li>
</ul>
<p><strong>Python 3 çš„æ‹¥æŠ¤è€…å’Œåå¯¹è€…</strong></p>
<ul>
<li><a href="http://asmeurer.github.io/python3-presentation/slides.html#1">10 awesome features of Python that you canâ€™t use because you refuse to upgrade to Python 3</a></li>
<li><a href="http://lucumr.pocoo.org/2014/5/12/everything-about-unicode/">Everything you did not want to know about Unicode in Python 3</a></li>
<li><a href="https://medium.com/@deliciousrobots/5d2ad703365dverything-about-unicode/">Python 3 is killing Python</a></li>
<li><a href="https://medium.com/@opinionbreaker/python-3-can-revive-python-2a7af4788b10">Python 3 can revive Python</a></li>
<li><a href="http://sealedabstract.com/rants/python-3-is-fine/">Python 3 is fine</a></li>
</ul>

          </div>
        </div>

        
          <div class="next-post">
            <a class="purple-link" href="http://wangqunsong.top/post/python-xue-xi-bi-ji-08_-ling-ren-tou-teng-de-zi-fu-bian-ma">
              <h3 class="post-title">
                ä¸‹ä¸€ç¯‡ï¼šPythonå­¦ä¹ ç¬”è®°08_ä»¤äººå¤´ç–¼çš„å­—ç¬¦ç¼–ç 
              </h3>
            </a>
          </div>
          
      </div>

      

      <div class="site-footer">
  <div class="slogan">å°å°ç‹çš„åèŠ±å›­</div>
  <div class="social-container">
    
      
    
      
    
      
    
      
    
      
    
  </div>
  Powered by <a href="https://github.com/getgridea/gridea" target="_blank">Gridea</a>
</div>


    </div>
    <script type="application/javascript">

hljs.initHighlightingOnLoad()

var app = new Vue({
  el: '#app',
  data: {
    menuVisible: false,
  },
})

</script>




  </body>
</html>
