<html>

<head>
    <meta charset="utf-8" />
<meta name="description" content="" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>
    JPypeä½¿ç”¨å°ç»“ | utopiaçš„åèŠ±å›­
</title>
<link rel="shortcut icon" href="http://wangqunsong.github.io/favicon.ico?v=1569390788318">
<!-- <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.2/css/all.css" integrity="sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" crossorigin="anonymous"> -->
<link href="https://cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.10.0/katex.min.css">
<link rel="stylesheet" href="http://wangqunsong.github.io/styles/main.css">
<!-- js -->
<script src="https://cdn.bootcss.com/jquery/3.4.1/jquery.min.js"></script>
<script src="http://wangqunsong.github.io/media/js/jquery.sticky-sidebar.min.js"></script>
<script src="https://cdn.bootcss.com/highlight.js/9.12.0/highlight.min.js"></script>
<script src="https://cdn.bootcss.com/moment.js/2.23.0/moment.min.js"></script>


        
</head>

<body>
    <div class="main">
        <div class="header">
    <div class="nav">
        <div class="logo">
            <a href="http://wangqunsong.github.io">
                <img class="avatar" src="http://wangqunsong.github.io/images/avatar.png?v=1569390788318" alt="">
            </a>
            <div class="site-title">
                <h1>
                    utopiaçš„åèŠ±å›­
                </h1>
            </div>
        </div>
        <span class="menu-btn fa fa-align-justify"></span>
        <div class="menu-container">
            <ul>
                
                    
                            <li>
                                <a href="http://wangqunsong.top" class="menu">
                                    é¦–é¡µ
                                </a>
                            </li>
                            
                                
                    
                            <li>
                                <a href="http://wangqunsong.top/archives" class="menu">
                                    å½’æ¡£
                                </a>
                            </li>
                            
                                
                    
                            <li>
                                <a href="http://wangqunsong.top/tags" class="menu">
                                    æ ‡ç­¾
                                </a>
                            </li>
                            
                                
                    
                            <li>
                                <a href="http://wangqunsong.top/post/shou-cang-lian-jie/" class="menu">
                                    æ”¶è—é“¾æ¥
                                </a>
                            </li>
                            
                                
            </ul>
        </div>
    </div>
</div>

<script>
    $(document).ready(function() {
        $(".menu-btn").click(function() {
            $(".menu-container").slideToggle();
        });
        $(window).resize(function() {

            if (window.matchMedia('(min-width: 960px)').matches) {
                $(".menu-container").css('display', 'block')
            } else {
                $(".menu-container").css('display', 'none')
            }

        });
    });
</script>

            <div id="main-content" class="post-detail main-container">
                <!-- left -->
                <div id="content" class="main-container-left">
                    <article class="post i-card">
                        <h2 class="post-title">
                            JPypeä½¿ç”¨å°ç»“
                        </h2>
                        <div class="post-info">
                            <time class="post-time">2018-10-16</time>
                            
                                <a href="http://wangqunsong.github.io/tag/1sgoPsPP5" class="post-tag i-tag
                            i-tag-primary">
                            #Python
                        </a>
                                
                        </div>
                        
                                <div class="post-content">
                                    <p>ğŸ‘  æ¬¢è¿ä½¿ç”¨ æ¥åˆ°å°å°ç‹çš„åèŠ±å›­ï¼<br>
âœï¸  è¿™é‡Œä»…ä»…æ˜¯ä¸€ä¸ªè®°å½•ä¸ªäººæˆé•¿çš„åœ°æ–¹ï¼Œç°åœ¨æ‰€å¤„çš„ä½ç½®æ˜¯<strong>JPypeä½¿ç”¨å°ç»“</strong></p>
<!-- more -->
<h4 id="æ¦‚è¿°">æ¦‚è¿°</h4>
<p>â€‹        å¾ˆå¤šäººéƒ½çŸ¥é“ <strong>Jythonï¼ˆ</strong> ä¹Ÿå«<strong>JPythonï¼‰</strong>ï¼Œ<strong>Jython</strong> æ˜¯åœ¨ Java è™šæ‹Ÿæœº(JVM) ä¸Šè¿è¡Œ <strong>python</strong> ä»£ç çš„ä¸€ç§è¯­è¨€ï¼ˆæ²¡é”™ï¼Œ<em>Jython</em>æ˜¯ä¸€ç§è¯­è¨€ï¼‰ï¼Œæ˜¾è€Œæ˜“è§ï¼Œ<strong>Jython</strong> æ˜¯ç»™ <strong>Javaç¨‹åºå‘˜</strong> è¿è¡Œ <strong>Python</strong> ç¨‹åºç”¨çš„ã€‚</p>
<p>â€‹      è€Œ <strong>JPype</strong> æ˜¯ä¸€ä¸ªåº“ï¼Œæ˜¯ç»™ <strong>python</strong>ç¨‹åºå‘˜ è¿è¡Œ <strong>Java</strong> ç¨‹åºç”¨çš„ï¼Œ<strong>JPype</strong>æä¾›äº†<strong>python</strong>è®¿é—®<strong>Java</strong>ä»£ç çš„èƒ½åŠ›ã€‚ç”¨æ›´æ­£å¼çš„è¯æ¥è¯´ï¼š</p>
<!--more-->
<blockquote>
<p>JPype æ˜¯ä¸€ä¸ªèƒ½å¤Ÿè®© Python ä»£ç æ–¹ä¾¿åœ°è°ƒç”¨ Java ä»£ç çš„å·¥å…·ï¼Œä»è€Œå…‹æœäº† Python åœ¨æŸäº›é¢†åŸŸï¼ˆå¦‚æœåŠ¡å™¨ç«¯ç¼–ç¨‹ï¼‰ä¸­çš„ä¸è¶³ã€‚(å¼•è‡ª<a href="https://www.ibm.com/developerworks/cn/opensource/os-cn-jpype/index.html">IBM</a>)</p>
</blockquote>
<h4 id="ç¯å¢ƒ">ç¯å¢ƒ</h4>
<p>â€‹    æœ¬æ–‡ä½¿ç”¨çš„æ“ä½œç³»ç»Ÿä¸ºwindows 10ï¼ŒJavaå’ŒPythonç‰ˆæœ¬å¦‚ä¸‹ï¼š</p>
<h5 id="javaç‰ˆæœ¬">JAVAç‰ˆæœ¬</h5>
<pre><code class="language-java">D:\&gt;java -version
java version &quot;1.8.0_101&quot;
Java(TM) SE Runtime Environment (build 1.8.0_101-b13)
Java HotSpot(TM) 64-Bit Server VM (build 25.101-b13, mixed mode)
</code></pre>
<h5 id="pythonç‰ˆæœ¬">Pythonç‰ˆæœ¬</h5>
<pre><code class="language-python">D:\&gt;python3
Python 3.5.2 (v3.5.2:4def2a2901a5, Jun 25 2016, 22:18:55) [MSC v.1900 64 bit (AMD64)] on win32
Type &quot;help&quot;, &quot;copyright&quot;, &quot;credits&quot; or &quot;license&quot; for more information.
&gt;&gt;&gt;
</code></pre>
<p>æ³¨ï¼šæœ¬æ–‡è™½ç„¶ä½¿ç”¨äº†3.5ç‰ˆæœ¬ï¼Œä½†<strong>JPype</strong> å¯ä»¥åŒæ—¶æ”¯æŒ 2.7 å’Œ 3.5 ï¼Œè€Œä¸”åœ¨ 2.7 ä¸Šå®‰è£… <strong>JPype</strong> æ¯” 3.5 ä¸Šæ›´æ–¹ä¾¿ã€‚</p>
<h4 id="å®‰è£…">å®‰è£…</h4>
<p>â€‹    åœ¨ <strong>Python 3.5</strong> ä¸­ï¼Œå®‰è£… <strong>JPype</strong> ä¸èƒ½ç›´æ¥ä½¿ç”¨ <strong>pip3</strong> å®‰è£…ï¼Œå› ä¸º<strong>JPype</strong>å¼€å‘æ—¶Python3è¿˜æœªæµè¡Œèµ·æ¥ï¼Œæ‰€ä»¥<strong>JPype</strong> é»˜è®¤æ˜¯ä¸º <strong>Python2</strong> ç¼–å†™çš„ã€‚ä¸è¿‡æœ‰å¤§ç‰›ä¸º <strong>Python3</strong> ç¼–å†™äº†ä¸€ä¸ªå…¼å®¹çš„ç‰ˆæœ¬ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦ç”¨æºç å®‰è£…ï¼Œå…·ä½“æ­¥éª¤ä¸ºï¼š</p>
<pre><code class="language-shell">&gt; git clone https://github.com/tcalmant/jpype-py3.git
&gt; cd jpype-py3
&gt; python3 setup.py install
</code></pre>
<p>æ³¨ï¼šè‹¥ç¼–è¯‘å‡ºé”™ï¼Œè¯·æ£€æŸ¥ä¸€ä¸‹ç³»ç»Ÿæ˜¯å¦ç¼ºä¹ <code>python3-dev</code> åº“ï¼Œæˆ–è€…æ˜¯å¦å®‰è£…äº† <strong>C++</strong> ç¼–è¯‘å·¥å…·ã€‚è‡³äºä¸ºä»€ä¹ˆéœ€è¦C++ç¼–è¯‘å·¥å…·ï¼Œå› ä¸º<strong>JPype</strong>æ˜¯ç”¨<strong>JNI</strong>å®ç°çš„ã€‚</p>
<blockquote>
<p>ä»€ä¹ˆæ˜¯JNIï¼Ÿï¼ˆæºè‡ª<a href="https://zh.wikipedia.org/wiki/Java%E6%9C%AC%E5%9C%B0%E6%8E%A5%E5%8F%A3">ç»´åŸºç™¾ç§‘</a>ï¼‰</p>
</blockquote>
<h4 id="ç®€å•ç¤ºä¾‹">ç®€å•ç¤ºä¾‹</h4>
<p>å…ˆçœ‹ä¸€å°æ®µç®€å•ä»£ç ï¼š</p>
<pre><code class="language-py">import jpype
from jpype import *

if __name__ == &quot;__main__&quot;:
    startJVM(jpype.getDefaultJVMPath())
    java.lang.System.out.println(&quot;Hello World&quot;)
    shutdownJVM()
</code></pre>
<p>â€‹      ä»£ç å¾ˆç®€å•ï¼Œå¼€å¤´çš„ <code>import</code> å¯¼å…¥äº†JPypeï¼Œå…³é”®ä»£ç éƒ½åœ¨ <code>__main__</code> é‡Œï¼Œä¸»è¦æ˜¯ç¬¬ä¸€å¥<code>startJVM</code>å’Œç¬¬ä¸‰å¥<code>shutdownJVM</code>ï¼Œå…¶å®å°±æ˜¯å¼€å¯å’Œå…³é—­ <strong>JVM</strong> çš„æ‰§è¡Œç¯å¢ƒï¼›ç„¶åä¸­é—´è¿™ä¸€å¥è¾“å‡ºäº†<code>hello world.</code>å¯ä»¥çœ‹åˆ°ï¼Œé™¤äº†å’Œåœ¨ <strong>Java</strong> ä¸­ç›´æ¥è°ƒç”¨ <code>System.out.println</code> å¤šäº†å‰é¢çš„åŒ…åä¹‹å¤–ï¼Œå…¶ä»–å’ŒJavaåŸç”Ÿä»£ç æ˜¯ä¸€æ ·çš„ã€‚</p>
<h4 id="ä¸æ­¢äºhelloworld">ä¸æ­¢äºHelloï¼ŒWorld</h4>
<p>â€‹       è¾“å‡º<code>Hello World</code>å¹¶æ²¡æœ‰ä»€ä¹ˆå®é™…æ„ä¹‰ï¼Œä»¥ä¸Šåªæ˜¯äº†è§£ä¸‹<em>JPype</em>çš„å·¥ä½œæµç¨‹ï¼Œæ›´å¸¸è§çš„ï¼Œæˆ‘ä»¬è¦å¼€å§‹è°ƒç”¨è‡ªå·±çš„<em>Java</em>ä»£ç ã€‚<strong>JPype</strong>è°ƒç”¨<strong>Java</strong>ä»£ç æœ‰ä¸¤ç§æ–¹å¼ï¼Œç¬¬ä¸€ç§æ˜¯ç›´æ¥ç¼–è¯‘ï¼ŒæŠŠæ‰€æœ‰çš„ä¸œè¥¿æ”¾åœ¨ä¸€ä¸ªæ–‡ä»¶å¤¹é‡Œï¼›ç¬¬äºŒç§æ˜¯å°†æºä»£ç æ‰“åŒ…æˆä¸€ä¸ª<code>jar</code>åŒ…ç„¶åè°ƒç”¨ã€‚è¿™é‡Œä½¿ç”¨ç¬¬äºŒç§æ–¹å¼ä»‹ç»ã€‚</p>
<p>â€‹      å‡è®¾ä½ æœ‰ä¸€ä¸ª<strong>JAVA</strong>ç±»å¦‚ä¸‹ï¼š</p>
<pre><code class="language-java">package com.test;

import org.apache.log4j.Logger;
public class Demo {
   public static Logger logger =Logger.getLogger(MathDemo.class.getName());
   public int add(int a, int b) {
     return a+b;
   }
}
</code></pre>
<p>ä»¥ä¸ŠDemoç±»ä¸­æœ‰ä¸ªä¸€ä¸ªaddæ–¹æ³•ï¼Œå¹¶ä¸”è¯¥ç±»ä¾èµ–äºç¬¬ä¸‰æ–¹ä¾èµ–åŒ…<code>log4j-1.2.16.jar</code>ã€‚å°†æ­¤æºç æ‰“åŒ…ç¼–è¯‘ä¸º<code>Demo.jar</code>ï¼Œæ‰€åœ¨è·¯å¾„ä¸º<code>E:/Test/Demo.jar</code>,å¹¶å°†ç¬¬ä¸‰æ–¹ä¾èµ–åŒ…æ‹·è´åˆ°<code>E:/Test/dependent</code>è·¯å¾„ä¸‹ï¼Œç„¶åæˆ‘ä»¬ç”¨<em>Python</em>è°ƒç”¨ä»¥ä¸Šä»£ç å¦‚ä¸‹;</p>
<pre><code class="language-py">from jpype import *
import os

jar_path = os.path.join(os.path.abspath('.'), 'E:/Test/Demo.jar')   #æºç åŒ…è·¯å¾„
dependent_path = os.path.join(os.path.abspath('.'), 'E:/Test/dependent') #ç¬¬ä¸‰æ–¹ä¾èµ–åŒ…è·¯å¾„
startJVM(getDefaultJVMPath(), &quot;-Djava.class.path=&quot; + jar_path,&quot;-Djava.ext.dirs=&quot; + dependent_path)    #å½“æœ‰ç¬¬ä¸‰æ–¹ä¾èµ–çš„jaråŒ…æ—¶ï¼Œå¿…é¡»æ·»åŠ -Djava.ext.dirså‚æ•°
if not isJVMStarted():
    startJVM(getDefaultJVMPath(), &quot;-Djava.class.path=&quot; + jar_path,&quot;-Djava.ext.dirs=&quot; + dependent_path)
JClass = JClass('com.test.Demo')
jpype_test = JClass()
add_result = (jpype_test.add(1, 2))
print (add_result)
shutdownJVM()
</code></pre>
<p>æˆ–è€…è¿˜å¯ä»¥è¿™æ ·ï¼š</p>
<pre><code>from jpype import *
import os

jar_path = os.path.join(os.path.abspath('.'), 'E:/Test/Demo.jar')   #æºç åŒ…è·¯å¾„
dependent_path = os.path.join(os.path.abspath('.'), 'E:/Test/dependent') #ç¬¬ä¸‰æ–¹ä¾èµ–åŒ…è·¯å¾„
startJVM(getDefaultJVMPath(), &quot;-Djava.class.path=&quot; + jar_path,&quot;-Djava.ext.dirs=&quot; + dependent_path)    #å½“æœ‰ç¬¬ä¸‰æ–¹ä¾èµ–çš„jaråŒ…æ—¶ï¼Œå¿…é¡»æ·»åŠ -Djava.ext.dirså‚æ•°
if not isJVMStarted():
    startJVM(getDefaultJVMPath(), &quot;-Djava.class.path=&quot; + jar_path,&quot;-Djava.ext.dirs=&quot; + dependent_path)
JClass = JClass('com.test.Demo')
jpype_test = JPackage('com').test.Demo
add_result = (jpype_test.add(1, 2))
print (add_result)
shutdownJVM()
</code></pre>
<p>â€‹      ä»¥ä¸Šä¸¤ç§æ–¹æ³•å¤§éƒ¨åˆ†æ˜¯ä¸€æ ·çš„ï¼Œä¸åŒçš„ä»…ä»…æ˜¯ä¸€ä¸ªä½¿ç”¨äº†<code>JClass</code>æ–¹æ³•ï¼Œå¦ä¸€ä¸ªç”¨äº†<code>JPackage</code>æ–¹æ³•ï¼Œè€Œ<code>JPackage</code>å¯¹ç±»çš„è®¿é—®ä¹Ÿæ˜¯ä¾é <code>Jclass</code>ï¼Œåªä¸è¿‡å…¶æä¾›äº†å¯¹åŒ…çš„è®¿é—®ã€‚å½’æ ¹ç»“åº•ï¼Œèƒ½å¦æ‰¾åˆ°ç±»è¿˜æ˜¯è¦ä¾é _jpype.findClass()è¿™ä¸ªå‡½æ•°ã€‚</p>
<p><strong>æ³¨æ„äº‹é¡¹ï¼š</strong></p>
<p>â€‹    1.è¿è¡Œä»¥ä¸Šä»£ç å¯èƒ½ä¼šå‡ºç°ä»¥ä¸‹é”™è¯¯ï¼š</p>
<pre><code>jpype._jexception.ExceptionPyRaisable: java.lang.Exception: Class not found
</code></pre>
<p>â€‹    è¿™æ˜¯å› ä¸ºåœ¨å¯åŠ¨JVMçš„æ—¶å€™ï¼ŒJPypeé»˜è®¤ä¸ä¼šæŠŠJDKä¸­ â€œ\jre\lib\extâ€ ä¸‹çš„JARåŒ…å¼•å…¥ï¼Œæ‰€ä»¥ä¸ºäº†é¿å…è°ƒç”¨è¿‡ç¨‹ä¸­å‡ºç°é—®é¢˜ï¼Œå»ºè®®å°† â€œ\jre\lib\extâ€ æˆ–è€…å…¶ä»–ä¾èµ–çš„æ‰€æœ‰jaråŒ…, å‡æ”¾å…¥æˆ‘ä»¬è‡ªå·±çš„ &quot;dependent&quot; ç›®å½•ã€‚</p>
<p>2.æˆ‘åœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­è¿˜ç¢°åˆ°å¦ä¸€ç§æƒ…å†µï¼š</p>
<p>â€‹      å³ä½¿æ‹·è´äº†æ‰€æœ‰çš„jaråŒ…åˆ°dependentç›®å½•ä¸‹ï¼Œè¿è¡Œæ—¶è¿˜æ˜¯æŠ¥ä»¥ä¸Šé”™è¯¯ï¼›åæ¥å‘ç°å¯èƒ½ä¸jarçš„æ‰“åŒ…æ–¹å¼æœ‰å…³ï¼Œç”±äºåŸæ¥ä½¿ç”¨äº†eclipseçš„<strong>Fat Jar</strong>æ‰“åŒ…æ’ä»¶ï¼Œæ‰“åŒ…æ—¶å¹¶æ²¡æœ‰ç”Ÿæˆ .classæ–‡ä»¶ï¼Œè€ŒPythonè°ƒç”¨æ—¶ï¼Œå¯¼å…¥çš„å…¶å®æ˜¯.classæ–‡ä»¶ï¼Œæœ€ç»ˆç”¨eclipseè‡ªå¸¦çš„æ‰“åŒ…å·¥å…·é‡æ–°æ‰“åŒ…æ‰å¾—ä»¥è§£å†³ã€‚ï¼ˆè¿™é‡Œä¸€ç›´æœ‰äº›ä¸å¤§æ˜ç™½ï¼Œæœ‰å…¶ä»–åŸå› å¸Œæœ›å¤§ç‰›è§£ç­”ï¼‰</p>
<h4 id="debug">DEBUG</h4>
<p>â€‹      JPypeä¸€ä¸ªå¾ˆè›‹ç–¼çš„åœ°æ–¹æ˜¯ï¼Œç»å¤§éƒ¨åˆ†éƒ½åªè¿”å›<code>Class not found</code>é”™è¯¯ï¼Œå¹¶æœªç»™å‡ºæ›´å¤šçš„é”™è¯¯ä¿¡æ¯ã€‚æ‰€ä»¥è¿™æ—¶å°±éœ€è¦Debugæ¥è¿›ä¸€æ­¥åˆ†æï¼Œå…·ä½“æ–¹æ³•ä¸ºï¼š</p>
<pre><code class="language-py">ç¼–è¾‘JPypeå®‰è£…ç›®å½•ä¸‹çš„native/common/include/jpype.hæ–‡ä»¶ï¼Œç¬¬23è¡Œ
//#define JPYPE_TRACING_INTERNAL
è¢«æ³¨é‡Šæ‰äº†ï¼Œå»æ‰å¼€å¤´çš„//ï¼Œç„¶åå›åˆ°Jpypeçš„ç›®å½•ä¸‹ï¼Œé‡æ–°ç¼–è¯‘JPypeï¼Œæ‰§è¡Œ
python3 setup.py build -f
python3 setup.py install -f
</code></pre>
<p>å†è¿è¡Œä½ çš„ä»£ç å³å¯çœ‹åˆ°debugä¿¡æ¯ã€‚</p>
<h4 id="æ€§èƒ½">æ€§èƒ½</h4>
<p>â€‹        å¯¹äºè·¨è¯­è¨€è°ƒç”¨ï¼Œç¦»ä¸å¼€çš„ä¸€ä¸ªè¯é¢˜å°±æ˜¯æ€§èƒ½äº†ï¼Œå¯¹äº <em>JPype</em>æ¥è¯´ï¼Œå› ä¸ºå®ƒåº•å±‚ä½¿ç”¨çš„æ˜¯<em>JNI</em>ï¼š<strong>JNI</strong> åœ¨<code>Java</code> ä¸­è¢«ç”¨æ¥å’Œä½å±‚çš„ <code>C/C++</code> ä»£ç è¿›è¡Œäº¤äº’ï¼Œå› æ­¤å¯ä»¥å‘ç° JPype å…¶å®ä¸æ˜¯ç®€å•å¾—åšäº†ä¸€å±‚è½¬æ¢ï¼Œå®é™…ä¸Šæ˜¯åšäº†ä¸¤å±‚çš„è½¬æ¢ã€‚</p>
<p>â€‹        ä½†äº‹å®ä¸Šï¼Œåœ¨ Python ä¸­ä½¿ç”¨ Java ä»£ç æœ‰ç‚¹ç±»ä¼¼äºåœ¨ Python ä¸­éƒ¨åˆ†ç”¨ C ä»£ç ä¸€æ ·ï¼Œä¸ä»…ä¸ä¼šé™ä½ python ä»£ç çš„æ€§èƒ½ï¼Œåè€Œä¼šæé«˜ python ä»£ç çš„æ€§èƒ½ã€‚æ—¢ç„¶æ˜¯è·¨è¯­è¨€ï¼Œé‚£ä¹ˆå½“é¢‘ç¹äº¤äº’æ—¶å¿…ç„¶ä¼šå¸¦æ¥æ›´å¤šå¼€é”€ï¼Œå¦‚æœä½ ç»å¸¸å¾€ Java ä»£ç ä¸­ä¼ é€’ç›¸åŒçš„å¯¹è±¡(ä¾‹å¦‚ String/Object/Array)çš„è¯ï¼Œé‚£ä¹ˆå¯ä»¥ä½¿ç”¨åŒ…è£…å™¨æ¥é¢„è½¬æ¢ï¼Œè¿™æ ·å¤šå°‘èƒ½æå‡ä¸€äº›ä»£ç çš„æ‰§è¡Œé€Ÿåº¦ã€‚</p>
<h4 id="æ•°æ®ç±»å‹">æ•°æ®ç±»å‹</h4>
<p>â€‹        ä¸åŒçš„è¯­è¨€æ”¯æŒçš„æ•°æ®ç±»å‹æ˜¯ä¸ä¸€æ ·çš„ï¼Œ<code>Java</code>ä¸­æœ‰ int,long,double,float ç­‰ç±»å‹ï¼Œè€Œ python ä¸­æ²¡æœ‰ double ï¼Œåªæœ‰ floatï¼Œæ‰€ä»¥å¦‚ä½•è¿›è¡Œæ•°æ®è½¬æ¢ä¹Ÿæ˜¯ä¸€ä¸ªé—®é¢˜ã€‚ä»¥ä¸‹ä¸ºJava ç±»å‹åˆ° python ç±»å‹çš„è½¬æ¢ï¼š</p>
<table>
<thead>
<tr>
<th><code>Java ç±»å‹</code></th>
<th><code>è½¬æ¢æˆçš„ python ç±»å‹</code></th>
</tr>
</thead>
<tbody>
<tr>
<td>byte, short and int</td>
<td>int</td>
</tr>
<tr>
<td>long</td>
<td>long</td>
</tr>
<tr>
<td>float and double</td>
<td>float</td>
</tr>
<tr>
<td>boolean</td>
<td>int of value 1 or 0</td>
</tr>
<tr>
<td>char</td>
<td><code>unicode of length 1</code></td>
</tr>
<tr>
<td>String</td>
<td>unicode</td>
</tr>
<tr>
<td>arrays</td>
<td>JArray</td>
</tr>
<tr>
<td><code>other Java object</code></td>
<td>JavaObject</td>
</tr>
<tr>
<td>Class</td>
<td>JavaClass</td>
</tr>
<tr>
<td>array Class</td>
<td>JavaArrayClass</td>
</tr>
</tbody>
</table>
<h4 id="javaå¼‚å¸¸å¤„ç†">Javaå¼‚å¸¸å¤„ç†</h4>
<p>â€‹        å¦‚æœå¸Œæœ›åœ¨ <strong>Python</strong> ä¸­æ•è· <strong>Java</strong> å¼‚å¸¸çš„è¯ï¼Œé‚£ä¹ˆ <strong>JPype</strong> æä¾›æœ‰ <code>JavaException</code> è¿™ä¸ªç±»ç”¨äºæ•è·æ‰€æœ‰çš„ <strong>Java</strong> å¼‚å¸¸ï¼Œé€šè¿‡æ•è· <code>JavaException</code> è¿™ä¸ªç±»ï¼Œä½ å¯ä»¥ä½¿ç”¨ <code>message()</code>ï¼Œ <code>stackTrace()</code> å’Œ <code>javaClass()</code> è¿™äº›æ–¹æ³•æ¥è·å¾—æ›´å¤šçš„å¼‚å¸¸ä¿¡æ¯ã€‚è¿™é‡Œä¸¾ä¸ªç®€å•çš„ä¾‹å­ï¼š</p>
<pre><code class="language-java">try :
    # Code that throws a java.lang.RuntimeException
except JavaException, ex :
    if JavaException.javaClass() is java.lang.RuntimeException :
        print &quot;Caught the runtime exception : &quot;, JavaException.message()
        print JavaException.stackTrace()
</code></pre>
<p>å¦‚æœä½ çœŸçš„æƒ³ç›´æ¥æ•è·<strong>çœŸæ­£</strong>çš„ <strong>Java</strong> å¼‚å¸¸çš„è¯ï¼Œé‚£ä¹ˆä½ å¯ä»¥ä½¿ç”¨ <code>JException</code> è¿™ä¸ªè£…é¥°å™¨ï¼Œä¾‹å¦‚ï¼š</p>
<pre><code>try :
    # Code that throws a java.lang.RuntimeException
except jpype.JException(java.lang.RuntimeException), ex :
    print &quot;Caught the runtime exception : &quot;, JavaException.message()
    print JavaException.stackTrace()
</code></pre>
<h4 id="jpypeçš„å±€é™">JPypeçš„å±€é™</h4>
<h5 id="1ä¸èƒ½é‡å¯jvm">1.ä¸èƒ½é‡å¯JVM</h5>
<p>â€‹       æœ‰æ—¶æˆ‘ä»¬åªä¼šå¶å°”è·‘ä¸€ä¸‹ <strong>Javaä»£ç </strong>ï¼Œå¹¶ä¸ä¼šä¸€ç›´è¿è¡Œç€ï¼Œè¿™æ—¶å€™ï¼Œä¸ºäº†æ€§èƒ½è€ƒè™‘ï¼Œå¯èƒ½å›æƒ³åœ¨è¿è¡Œå®Œ <strong>Javaä»£ç </strong> ä¹‹åä¼šå…³æ‰ <strong>JVM</strong>ï¼Œç„¶ååœ¨ä¸‹æ¬¡è¿è¡Œ<strong>Javaä»£ç </strong>çš„æ—¶å€™å†å¯åŠ¨ä¸€æ¬¡<strong>JVM</strong>ã€‚ç„¶è€Œï¼Œè¿™æ ·å¹¶ä¸å¯è¡Œï¼š</p>
<pre><code class="language-python">import jpype
from jpype import *


if __name__ == &quot;__main__&quot;:
    print(jpype.getDefaultJVMPath())
    startJVM(jpype.getDefaultJVMPath())
    java.lang.System.out.println(&quot;è¿™æ˜¯ç¬¬ä¸€æ¬¡è¿è¡Œ&quot;)
    shutdownJVM()

    startJVM(jpype.getDefaultJVMPath())
    java.lang.System.out.println(&quot;è¿™æ˜¯ç¬¬äºŒæ¬¡è¿è¡Œ&quot;)
    shutdownJVM()
</code></pre>
<p>â€‹        æ‰§è¡Œä»¥ä¸Šä»£ç ï¼Œä½ ä¼šå‘ç°æŠ¥é”™äº†ï¼Œæ²¡é”™ï¼Œåœ¨ç¬¬äºŒæ¬¡å¯åŠ¨ <strong>JVM</strong> çš„æ—¶å€™å‡ºé”™äº†ï¼Œ<strong>JVM</strong>å±…ç„¶å¯åŠ¨ä¸èµ·æ¥äº†ï¼ï¼ï¼è¿™æ˜¯ BUGï¼Œè€Œä¸”æ˜¯å¾ˆä¹…çš„ BUGï¼Œæ›´è›‹ç–¼çš„æ˜¯ï¼Œä½œè€…ä¹Ÿå¹¶ä¸æƒ³ä¿®å¤è¿™ä¸ªBUGï¼Œè¯¦ç»†å†…å®¹å¯ç§»æ­¥<a href="https://github.com/originell/jpype/issues/84">ISSUE 84</a> ã€‚</p>
<p>â€‹        è¿™ä¸ªä¸åˆç†çš„è®¾è®¡èƒŒåï¼Œå…¶å®æ˜¯æœ‰åŸå› çš„ã€‚ JPype åº•å±‚ä¾èµ–çš„æ˜¯ JNIï¼Œç„¶å JNI çš„ API ä¸­å®ç°äº†ä¸€ä¸ª <code>destroyJVM()</code> çš„å‡½æ•°ï¼Œç„¶è€Œè¿™ä¸ªå‡½æ•°å¹¶ä¸å·¥ä½œï¼Œæ‰€ä»¥å½“å†æ¬¡è°ƒç”¨ <code>startupJVM()</code> çš„æ—¶å€™ï¼Œå¾—åˆ°çš„ä¼šæ˜¯ä¸€ä¸ªå¼‚å¸¸ã€‚</p>
<h5 id="2ä¾èµ–äºå½“å‰ç±»çš„æ–¹æ³•">2.ä¾èµ–äºâ€œå½“å‰ç±»â€çš„æ–¹æ³•</h5>
<p>â€‹        åœ¨ <strong>Java</strong> çš„åº“ä¸­ï¼Œæœ‰å¾ˆå¤šæ–¹æ³•ä¾èµ–äºè°ƒç”¨çš„ç±»æ¥æŸ¥æ‰¾ä¿¡æ¯ï¼Œæ‰€ä»¥ï¼Œå½“æˆ‘ä»¬åœ¨ <strong>Python</strong> ä¸­è°ƒç”¨è¿™äº›æ–¹æ³•æ—¶ï¼Œå°±ä¼šå‡ºé”™ï¼Œå› ä¸ºæ²¡æœ‰<strong>java è°ƒç”¨ç±»</strong>æä¾›ç»™å®ƒï¼Œè€Œä¸” <strong>JNI api</strong> ä¹Ÿæ²¡æœ‰åŠæ³•æ¥æä¾›ä»¿çœŸçš„æ–¹æ³•ã€‚</p>
<p>ç›®å‰é‡åˆ°è¿‡ä¼šå‡ºç°è¿™ç§é—®é¢˜çš„å‡½æ•°æœ‰ï¼š</p>
<pre><code class="language-java">java.lang.Class.forName(String classname);
java.sql.DriverManager.getConnection(...);
</code></pre>
<p>ç¬¬ä¸€å¥å¯ä»¥ä½¿ç”¨è¿™ç§æ–¹å¼ç±»æ›¿æ¢ï¼š</p>
<pre><code class="language-java">Class.forName(classname, True, ClassLoader.getSystemClassLoader())
</code></pre>
<p>ç¬¬äºŒå¥çš„è¯å¯ä»¥å…ˆå®ä¾‹åŒ–å¥½ driver å¯¹è±¡ï¼Œç„¶åå†ä¼ é€’ç»™ connect æ–¹æ³•äº†ã€‚</p>
<h4 id="æ€»ç»“">æ€»ç»“</h4>
<p>â€‹       åœ¨ä½¿ç”¨JPypeçš„è¿‡ç¨‹ä¸­ï¼Œä½ ä¸€å®šä¼šé‡åˆ°å„ç§å„æ ·çš„é—®é¢˜ï¼Œè§£å†³è¿™äº›é—®é¢˜çš„è¿‡ç¨‹ï¼Œå…¶å®æ˜¯ä¸ªæœ€å¥½çš„å­¦ä¹ è¿‡ç¨‹ï¼</p>
<blockquote>
<p>å£°æ˜ï¼šè½¬è½½è¯·æ³¨æ˜å‡ºå¤„ï¼</p>
</blockquote>

                                </div>
                    </article>
                    <!--  -->
                    
                        <div class="next-post">
                            <div class="next">ä¸‹ä¸€ç¯‡</div>
                            <a href="http://wangqunsong.github.io/post/liao-liao-linux-san-jian-ke">
                                <h3 class="post-title">
                                    èŠèŠLinuxä¸‰å‰‘å®¢
                                </h3>
                            </a>
                        </div>
                        
                            <div id="disqus_thread"></div>
                            <div id="gitalk-container"></div>
                </div>
                <!-- middle -->
                <div class="main-container-middle"></div>
                <!-- right -->
                <div id="sidebar" class="main-container-right">
                    
                        <!-- toc -->
                        
    <div class="toc-card i-card ">
        <div class="toc-title i-card-title">ç›®å½•</div>
        <div class="toc-content">
            <ul class="markdownIt-TOC">
<li>
<ul>
<li>
<ul>
<li>
<ul>
<li><a href="#%E6%A6%82%E8%BF%B0">æ¦‚è¿°</a></li>
<li><a href="#%E7%8E%AF%E5%A2%83">ç¯å¢ƒ</a>
<ul>
<li><a href="#java%E7%89%88%E6%9C%AC">JAVAç‰ˆæœ¬</a></li>
<li><a href="#python%E7%89%88%E6%9C%AC">Pythonç‰ˆæœ¬</a></li>
</ul>
</li>
<li><a href="#%E5%AE%89%E8%A3%85">å®‰è£…</a></li>
<li><a href="#%E7%AE%80%E5%8D%95%E7%A4%BA%E4%BE%8B">ç®€å•ç¤ºä¾‹</a></li>
<li><a href="#%E4%B8%8D%E6%AD%A2%E4%BA%8Ehelloworld">ä¸æ­¢äºHelloï¼ŒWorld</a></li>
<li><a href="#debug">DEBUG</a></li>
<li><a href="#%E6%80%A7%E8%83%BD">æ€§èƒ½</a></li>
<li><a href="#%E6%95%B0%E6%8D%AE%E7%B1%BB%E5%9E%8B">æ•°æ®ç±»å‹</a></li>
<li><a href="#java%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86">Javaå¼‚å¸¸å¤„ç†</a></li>
<li><a href="#jpype%E7%9A%84%E5%B1%80%E9%99%90">JPypeçš„å±€é™</a>
<ul>
<li><a href="#1%E4%B8%8D%E8%83%BD%E9%87%8D%E5%90%AFjvm">1.ä¸èƒ½é‡å¯JVM</a></li>
<li><a href="#2%E4%BE%9D%E8%B5%96%E4%BA%8E%E5%BD%93%E5%89%8D%E7%B1%BB%E7%9A%84%E6%96%B9%E6%B3%95">2.ä¾èµ–äºâ€œå½“å‰ç±»â€çš„æ–¹æ³•</a></li>
</ul>
</li>
<li><a href="#%E6%80%BB%E7%BB%93">æ€»ç»“</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>

        </div>
        <script>
            function locateCatelogList() {
                /*è·å–æ–‡ç« ç›®å½•é›†åˆ,å¯é€šè¿‡:headerè¿‡æ»¤å™¨*/
                var alis = $('.post-content :header');
                /*è·å–ä¾§è¾¹æ ç›®å½•åˆ—è¡¨é›†åˆ**/
                var sidebar_alis = $('.markdownIt-TOC a');
                /*è·å–æ»šåŠ¨æ¡åˆ°é¡¶éƒ¨çš„è·ç¦»*/
                var scroll_height = $(window).scrollTop();
                for (var i = 0; i < alis.length; i++) {
                    /*è·å–é”šç‚¹é›†åˆä¸­çš„å…ƒç´ åˆ†åˆ«åˆ°é¡¶ç‚¹çš„è·ç¦»*/
                    var a_height = $(alis[i]).offset().top;
                    if (a_height < scroll_height) {
                        /*é«˜äº®æ˜¾ç¤º*/
                        sidebar_alis.removeClass('on');
                        $(sidebar_alis[i]).addClass('on');
                    }
                }
            }
            $(function() {
                /*ç»‘å®šæ»šåŠ¨äº‹ä»¶ */
                $(window).bind('scroll', locateCatelogList);
            });
        </script>
    </div>
    
                            

                </div>




            </div>


            <div class="site-footer">
  Powered by <a href="http://wangqunsong.top/" target="_blank">å°å°ç‹</a> | 
  <a class="rss" href="http://wangqunsong.github.io/atom.xml" target="_blank">RSS</a>
</div>

<script>
  hljs.initHighlightingOnLoad()
</script>


    </div>
    <script>
        $('#sidebar').stickySidebar({
            topSpacing: 80,
            // bottomSpacing: 60
        });
    </script>
    
</body>

</html>